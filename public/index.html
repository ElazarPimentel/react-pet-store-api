<!-- public/index.html -->

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pata-Pata Petstore API</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 0;
        }
        h1 {
            color: #2c3e50;
        }
        p {
            font-size: 1.1em;
            line-height: 1.6;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 4px;
            font-size: 0.9em;
            border-radius: 3px;
        }
        pre {
            background-color: #f4f4f4;
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>Pata-Pata Petstore API</h1>
    <p><strong>Pata-Pata Petstore API</strong> es una API backend desarrollada en <strong>Node.js</strong> y <strong>Express.js</strong> que gestiona listados de productos y carritos de compras para una tienda de mascotas online. Esta API proporciona endpoints para <strong>obtener detalles de productos</strong>, <strong>agregar nuevos productos</strong>, <strong>actualizar y eliminar productos</strong> y <strong>gestionar carritos de compras</strong>.</p>

    <h2>Características Principales</h2>
    <ul>
        <li><strong>Productos</strong>: Los usuarios pueden obtener una lista de productos disponibles en la tienda, ver detalles de productos individuales por su ID, agregar nuevos productos al catálogo, actualizar productos existentes y eliminar productos.</li>
        <li><strong>Carritos de Compras</strong>: Los usuarios pueden crear carritos de compras, agregar productos al carrito y actualizar la cantidad de productos en los carritos existentes.</li>
        <li><strong>Archivos Estáticos</strong>: La API también sirve imágenes de los productos (thumbnails) almacenadas en el directorio público del servidor.</li>
        <li><strong>Persistencia de Datos</strong>: Los datos de productos y carritos se almacenan en archivos JSON ubicados en el directorio `/tmp` para compatibilidad con Vercel.</li>
    </ul>

    <h2>Instalación</h2>
    <pre>
npm install
npm start
    </pre>

    <h2>Endpoints</h2>
    <h3>Productos</h3>
    <ul>
        <li><strong>GET /products</strong>: Obtené todos los productos disponibles. Podés agregar un parámetro de consulta <code>?limit</code> para limitar la cantidad de productos retornados.</li>
        <li><strong>GET /products/:id</strong>: Consultá un producto específico por su ID.</li>
        <li><strong>POST /products</strong>: Agregá un nuevo producto al catálogo. Campos requeridos:
            <ul>
                <li><code>title</code> (string)</li>
                <li><code>description</code> (string)</li>
                <li><code>code</code> (string)</li>
                <li><code>price</code> (number)</li>
                <li><code>stock</code> (number)</li>
                <li><code>category</code> (string)</li>
            </ul>
            Campos opcionales:
            <ul>
                <li><code>status</code> (boolean, por defecto <code>true</code>)</li>
                <li><code>thumbnails</code> (array de strings con rutas de imágenes)</li>
            </ul>
        </li>
        <li><strong>PUT /products/:id</strong>: Actualizá los campos de un producto existente excepto su <code>id</code>. Campos a actualizar:
            <ul>
                <li><code>title</code> (string)</li>
                <li><code>description</code> (string)</li>
                <li><code>code</code> (string)</li>
                <li><code>price</code> (number)</li>
                <li><code>stock</code> (number)</li>
                <li><code>category</code> (string)</li>
                <li><code>status</code> (boolean)</li>
                <li><code>thumbnails</code> (array de strings con rutas de imágenes)</li>
            </ul>
        </li>
        <li><strong>DELETE /products/:id</strong>: Eliminá un producto por su ID.</li>
    </ul>

    <h3>Carritos</h3>
    <ul>
        <li><strong>GET /carts/:id</strong>: Consultá un carrito por su ID.</li>
        <li><strong>POST /carts</strong>: Creá un nuevo carrito con un <code>id</code> auto-generado y un array vacío de <code>products</code>.</li>
        <li><strong>POST /carts/:cid/product/:pid</strong>: Agregá un producto al carrito o actualizá la cantidad de un producto existente en el carrito. 
            <ul>
                <li><code>product</code> (ID del producto)</li>
                <li><code>quantity</code> (incrementa si el producto ya existe en el carrito)</li>
            </ul>
        </li>
    </ul>

    <h2>Despliegue</h2>
    <p>Esta API está desplegada en Vercel y se puede acceder a través del siguiente enlace:</p>
    <p><a href="https://react-pet-store-api.vercel.app">https://react-pet-store-api.vercel.app</a></p>

    <h2>Requerimientos</h2>
    <ul>
        <li><strong>Node.js</strong> versión 14 o superior.</li>
        <li><strong>Express.js</strong> como framework backend.</li>
    </ul>

    <h2>Middleware</h2>
    <p>La API utiliza varios middleware personalizados para mejorar su funcionalidad:</p>
    <ul>
        <li><strong>Manejo de Errores</strong>: Middleware que captura y gestiona errores de manera uniforme en toda la aplicación.</li>
        <li><strong>Validación de Datos</strong>: Middleware que valida los datos de entrada en las solicitudes, asegurando que tengan los formatos y requisitos correctos.</li>
        <li><strong>CORS</strong>: Configuración de Cross-Origin Resource Sharing para permitir solicitudes de dominios específicos.</li>
        <li><strong>Análisis de JSON</strong>: Middleware para interpretar el cuerpo de las solicitudes JSON.</li>
    </ul>

    <h2>Notas Adicionales</h2>
    <ul>
        <li><strong>Persistencia de Datos en Vercel</strong>: Debido a las restricciones del sistema de archivos de Vercel, los archivos JSON para productos y carritos se almacenan en el directorio `/tmp`, que es temporal y se reinicia en cada invocación de función. Para una persistencia de datos real, se recomienda utilizar una base de datos externa.</li>
        <li><strong>Limitaciones de `/tmp`</strong>: Recordá que los datos almacenados en `/tmp` no son persistentes y se perderán entre las ejecuciones. Esto es adecuado para propósitos de prueba y desarrollo, pero no para un entorno de producción.</li>
    </ul>

    <h2>Contribuciones</h2>
    <p>Las contribuciones son bienvenidas. Si encontrás algún problema o querés proponer mejoras, podés abrir un issue o pull request. ¡Gracias por colaborar! :)</p>

    <h3>Descripción de los Cambios Realizados:</h3>
    <ol>
        <li><strong>Actualización de Endpoints:</strong>
            <ul>
                <li><strong>Productos:</strong>
                    <ul>
                        <li>Se añadieron los endpoints <code>PUT /products/:id</code> y <code>DELETE /products/:id</code> para cumplir con los requisitos de actualización y eliminación de productos.</li>
                        <li>Se incluyó la opción de limitar los productos retornados en <code>GET /products</code> mediante el parámetro de consulta <code>?limit</code>.</li>
                    </ul>
                </li>
                <li><strong>Carritos:</strong>
                    <ul>
                        <li>Se mantuvieron los endpoints existentes, asegurando que cumplan con los requisitos de la asignación.</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li><strong>Detalles de Campos:</strong>
            <ul>
                <li>Se especificaron claramente los campos requeridos y opcionales para los endpoints <code>POST</code> y <code>PUT</code> de productos.</li>
                <li>Se aclaró que el campo <code>thumbnails</code> es opcional y no se fuerza una imagen por defecto.</li>
            </ul>
        </li>
        <li><strong>Notas Adicionales:</strong>
            <ul>
                <li>Se añadió una sección sobre la persistencia de datos en Vercel, destacando las limitaciones del directorio <code>/tmp</code> y recomendando el uso de una base de datos externa para la persistencia real.</li>
            </ul>
        </li>
        <li><strong>Ejemplos de Uso:</strong>
            <ul>
                <li>Se incluyeron ejemplos prácticos para los distintos endpoints, facilitando el entendimiento y uso de la API.</li>
            </ul>
        </li>
    </ol>
</body>
</html>
